<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="first.css">
    <title>ìŠ¬ê¸°ë¡œìš´ ê³ 3 ìƒí™œ</title>
<style media="screen">
  h2 { font-size: 30px;}
  h3 { font-size: 25px;}
  fieldset{border-radius: 8px;}

</style>
  </head>
  <body>
    <h1>ğŸ“–ìŠ¬ê¸°ë¡œìš´ ê³ 3 ìƒí™œğŸ“–</h1>
    <hr/>
    <leftdiv id="grid">
        <lft>
          <ul>
            <li><a href="today.html"><strong>ì˜¤ëŠ˜ì˜ í•  ì¼ ë³´ê¸°</strong></a></li>
            <li><a href="cal.html"><strong>ë‚ ì§œë³„ í•  ì¼</strong></a></li>
            <li><a href="timer.html"><strong>ìˆ˜ëŠ¥ì²˜ëŸ¼ ê³µë¶€í•˜ê¸°</strong></a></li>
            <li><a href="hello.html"><strong>ë‚˜ì˜ ê¸°ë¡</strong></a></li>
            <li><a href="http://www.jinhakapply.com/"><strong>ì§„í•™ì‚¬ ì–´í”Œë¼ì´</strong></a></li>
            </ul>
      </lft>
    <article id="article">
    <h2>ì˜¤ëŠ˜ì˜ í•  ì¼</h2>
    <h3 id="today"></h3>
    <form name = "new" method="get">
    <fieldset  style="overflow:auto; width:500px; height:200px;">
      <twlist id="list"></twlist>
 </fieldset>
</form>



      <h3>ì˜¤ëŠ˜ í•œ ì¼!ğŸ˜†</h3>
      <form name = "new" method="get">
      <fieldset  style="overflow:auto; width:500px; height:150px;">
        <dolist id="dolist"></dolist>
   </fieldset>
  </form>

      <br/>
      <h3>ì˜¤ëŠ˜ ëª»í•œ ì¼ğŸ™</h3>

      <form name = "new" method="get">
      <fieldset  style="overflow:auto; width:500px; height:150px;">
          <nolist id="nolist"></nolist>
   </fieldset>
  </form>


</article>
<script type="text/javascript">
  var twArr = new Array();//ì˜¤ëŠ˜ í• ì¼ ë°°ì—´
  var today = new Date();
  var doArr = new Array(); //í•œì¼ ë°°ì—´
  var noArr = new Array(); //ëª»í•œì¼ ë°°ì—´
 var tMonth = today.getMonth()+1;
 var into = today.getFullYear()+"."+tMonth+"."+today.getDate();
var todaylist = document.getElementById("list");
  window.onload=function start(){
    var date = document.getElementById("today");
    date.innerHTML=+today.getFullYear()+"ë…„ "+tMonth+"ì›” "+today.getDate()+"ì¼ì˜ í•´ì•¼í•˜ëŠ” ì¼!";
  loadlists();

};

function loadlists(){
  twArr=[];
    var workcheck = localStorage.getItem("localworklist");
        if(workcheck!=null){
         var storedStorage = JSON.parse(workcheck);
         for(var i=0;i<storedStorage.length;i++){
           if(storedStorage[i].year==today.getFullYear()
           &&storedStorage[i].month==tMonth
           &&storedStorage[i].date==today.getDate()){
              var newId = twArr.length+1;
             var obj={
           id:newId, today:into, work:storedStorage[i].work};
       twArr.push(obj);
       localStorage.setItem("localtwlist",JSON.stringify(twArr));
             var li = document.createElement("li");
             li.id=newId;
             var dobutton = '<input type="button" onClick="dowork(this)" value="ğŸ˜†"/>';
             var nobutton = '<input type="button" onClick="nowork(this)" value="ğŸ™"/>';
             li.innerHTML=storedStorage[i].work+" "+dobutton+nobutton+"<hr>";
             todaylist.appendChild(li);
           }
          }
      }
      donoload("localdolist",doArr,"dolist");
      donoload("localnolist",noArr,"nolist");
}

function donoload(local,arr,inn){
//í•œ ì¼ ëª»í•œ ì¼ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
  var donocheck = localStorage.getItem(local);
  if(donocheck!=null){
    var storedStorage = JSON.parse(donocheck);
      for(var i=0;i<storedStorage.length;i++){
        var ol = document.getElementById(inn);
        if(storedStorage[i].today!=into || todaylist.innerHTML==""){
               arr=[];
              localStorage.setItem(local,JSON.stringify(arr));
              ol.innerHTML="";
        }

        else{
          var newId = arr.length+1;
          var obj={
         id:newId, work:storedStorage[i].work, today:storedStorage[i].today};
         arr.push(obj);
         localStorage.setItem(local,JSON.stringify(arr));
         var li = document.createElement("li");
         li.id=newId;
         li.innerHTML=storedStorage[i].work+"<hr>";
         ol.appendChild(li);
          }
      }
  }
}

function dowork(obj){//ì„±ê³µí•œ ì¼
  var p=obj.parentElement;
        var key =p.id;
        for(var i=0;i<twArr.length;i++){
          if(key==twArr[i].id){
            var li = document.createElement("li");
            var newId = doArr.length+1;
            li.id=newId;
            li.innerHTML=twArr[i].work+" "+"<hr>";
            var ol = document.getElementById("dolist");
            ol.appendChild(li);
            var obj={
               id:newId, work:twArr[i].work, today:twArr[i].today
           };
           doArr.push(obj);
         localStorage.setItem("localdolist",JSON.stringify(doArr));
        }
      }
}

function nowork(obj){//ì‹¤íŒ¨í•œ ì¼
  var p=obj.parentElement;
        var key =p.id;
        for(var i=0;i<twArr.length;i++){
          if(key==twArr[i].id){
            var li = document.createElement("li");
            var newId = noArr.length+1;
            li.id=newId;
            li.innerHTML=twArr[i].work+" "+"<hr>";
            var ol = document.getElementById("nolist");
            ol.appendChild(li);
            var obj={
               id:newId, work:twArr[i].work,today:twArr[i].today
           };
           noArr.push(obj);
         localStorage.setItem("localnolist",JSON.stringify(noArr));
        }
      }
}

</script>
  </body>
</html>
